# Backend Production Environment Configuration
# This file contains production-ready settings for the Booking Swap backend

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
# Production server port
PORT=3001
# Production environment
NODE_ENV=production

# =============================================================================
# DATABASE CONFIGURATION - PRODUCTION
# =============================================================================
# PostgreSQL connection string for production
# SECURITY: Use strong, unique credentials for production
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://prod_booking_swap_user:CHANGE_THIS_SECURE_PASSWORD@your-db-host:5432/booking_swap_prod_db

# Redis connection string for production caching and sessions
# SECURITY: Use password-protected Redis instance
REDIS_URL=redis://:CHANGE_THIS_REDIS_PASSWORD@your-redis-host:6379

# =============================================================================
# JWT AUTHENTICATION CONFIGURATION - PRODUCTION
# =============================================================================
# SECURITY: Use a strong, unique JWT secret (minimum 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_TO_A_VERY_SECURE_PRODUCTION_JWT_SECRET_MINIMUM_32_CHARACTERS
# JWT token expiration time for production (24 hours recommended)
JWT_EXPIRES_IN=24h

# =============================================================================
# HEDERA BLOCKCHAIN CONFIGURATION - MAINNET
# =============================================================================
# Production Hedera network
HEDERA_NETWORK=mainnet
# Your production Hedera account ID (format: 0.0.123456)
HEDERA_ACCOUNT_ID=0.0.YOUR_MAINNET_ACCOUNT_ID
# Your production Hedera account private key (DER encoded)
HEDERA_PRIVATE_KEY=YOUR_MAINNET_PRIVATE_KEY_HERE
# Hedera topic ID for consensus service (format: 0.0.123456)
HEDERA_TOPIC_ID=0.0.YOUR_MAINNET_TOPIC_ID

# =============================================================================
# EXTERNAL API CONFIGURATION - PRODUCTION
# =============================================================================
# Production API key for booking provider integration
BOOKING_PROVIDER_API_KEY=your_production_booking_api_key_here

# =============================================================================
# SECURITY CONFIGURATION - PRODUCTION
# =============================================================================
# BCrypt rounds for password hashing (12+ recommended for production)
BCRYPT_ROUNDS=12
# Session timeout in milliseconds (1 hour)
SESSION_TIMEOUT=3600000
# CORS origin for production domain
CORS_ORIGIN=https://your-production-domain.com
# Additional CORS origins (comma-separated if multiple)
CORS_ADDITIONAL_ORIGINS=https://www.your-production-domain.com,https://app.your-production-domain.com

# =============================================================================
# RATE LIMITING CONFIGURATION - PRODUCTION
# =============================================================================
# Rate limiting window in milliseconds (15 minutes)
RATE_LIMIT_WINDOW_MS=900000
# Maximum requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100
# Rate limiting for authentication endpoints (stricter)
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=10

# =============================================================================
# LOGGING CONFIGURATION - PRODUCTION
# =============================================================================
# Production log level (info recommended, debug for troubleshooting)
LOG_LEVEL=info
# Enable structured logging for production
STRUCTURED_LOGGING=true
# Log file path (optional, logs to stdout by default)
LOG_FILE_PATH=/var/log/booking-swap/app.log

# =============================================================================
# MONITORING AND METRICS - PRODUCTION
# =============================================================================
# Enable Prometheus metrics collection
ENABLE_METRICS=true
# Metrics server port
METRICS_PORT=9090
# Health check endpoint configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# =============================================================================
# BACKUP CONFIGURATION - PRODUCTION
# =============================================================================
# Enable automated backups
BACKUP_ENABLED=true
# Backup schedule (cron format) - daily at 2 AM
BACKUP_SCHEDULE=0 2 * * *
# Backup retention in days
BACKUP_RETENTION_DAYS=30
# Backup storage path
BACKUP_STORAGE_PATH=/var/backups/booking-swap

# =============================================================================
# SWAP EXPIRATION SERVICE CONFIGURATION - PRODUCTION
# =============================================================================
# Enable automatic swap expiration processing
SWAP_EXPIRATION_ENABLED=true
# Check for expired swaps every 5 minutes
SWAP_EXPIRATION_CHECK_INTERVAL_MINUTES=5
# Startup delay for expiration service (10 seconds)
SWAP_EXPIRATION_STARTUP_DELAY_MS=10000
# Graceful shutdown timeout (30 seconds)
SWAP_EXPIRATION_SHUTDOWN_TIMEOUT_MS=30000
# Disable detailed logging in production (performance)
SWAP_EXPIRATION_ENABLE_DETAILED_LOGGING=false
# Enable metrics collection for monitoring
SWAP_EXPIRATION_ENABLE_METRICS=true

# =============================================================================
# EMAIL CONFIGURATION - PRODUCTION (if applicable)
# =============================================================================
# SMTP configuration for production emails
SMTP_HOST=your-smtp-host.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your-smtp-username
SMTP_PASSWORD=your-smtp-password
# Email sender configuration
EMAIL_FROM=noreply@your-production-domain.com
EMAIL_FROM_NAME=Booking Swap Platform

# =============================================================================
# FEATURE FLAGS BACKEND NOTES - PRODUCTION
# =============================================================================
#
# IMPORTANT: The backend does NOT use feature flags for API functionality.
# All auction and cash swap functionality remains fully operational regardless
# of frontend feature flag settings.
#
# This design ensures:
# 1. Existing data continues to work normally
# 2. API endpoints remain stable and functional  
# 3. Features can be re-enabled without backend changes
# 4. No database migrations or schema changes are required
# 5. Backend services continue to process all swap types and payment methods
#
# The frontend feature flags (VITE_ENABLE_*) control only UI visibility.
# Backend services continue to handle all requests and data processing.
#
# =============================================================================
# PRODUCTION DEPLOYMENT SECURITY CHECKLIST
# =============================================================================
#
# Before deploying to production, ensure:
#
# 1. DATABASE SECURITY:
#    - Change DATABASE_URL to use secure credentials
#    - Use SSL/TLS for database connections
#    - Restrict database access to application servers only
#
# 2. JWT SECURITY:
#    - Generate a strong, unique JWT_SECRET (minimum 32 characters)
#    - Use secure random generation: openssl rand -base64 32
#    - Never reuse JWT secrets between environments
#
# 3. HEDERA SECURITY:
#    - Use mainnet account with sufficient HBAR balance
#    - Secure private key storage (consider key management service)
#    - Monitor account balance and transactions
#
# 4. API SECURITY:
#    - Update all API keys to production values
#    - Enable rate limiting and CORS restrictions
#    - Use HTTPS for all external API communications
#
# 5. MONITORING:
#    - Enable metrics collection and alerting
#    - Set up log aggregation and monitoring
#    - Configure health checks and uptime monitoring
#
# =============================================================================